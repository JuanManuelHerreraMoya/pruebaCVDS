<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"

      xmlns:p="http://primefaces.org/ui">
      
      <h:head>
      	<meta charset="UTF-8"></meta>
      	<link rel="stylesheet" type="text/css" href="css/admin.css"/>
      	
      	<meta http-equiv="Expires" content="0" />
		<meta http-equiv="Pragma" content="no-cache" />
		
		<script type="text/javascript">
		  if(history.forward(1)){
		    location.replace( history.forward(1) );
		  }
		</script>
      	<title>Admin-Iniciativas</title>

		  <img style="float: right; margin: 0px 0px 15px 15px;" src="img/usuario.jpg" width="50" />
		  <h3 align="right">
			  <h:outputText value="#{LoginBean.getNombreUsuario()}"/> <br/>
			  <h:outputText value="#{LoginBean.getRolUsuario()}"/><br/>
			  <p:commandButton class="logout" value="Volver" action="#{PageBean.page02}"/>
			  <p:commandButton class="logout" value="Cerrar sesión" action="#{LoginBean.logout}"/><br/>
		  </h3>
      
	</h:head>

      <h:body>

		  <br/><br/>
		  <h1>Modificar estado de iniciativas</h1>
		  <h2>Unidad de proyectos</h2>
		  <br/><br/>
		  
		  <h:form id="form">

					<div id="dos">
						<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
							<h:outputText value="Nombre: "/>
							<h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getNombre()}"/>

							<h:outputText value="Descripción: "/>
							<h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getDescripcion()}"/>

							<h:outputText value="Palabras clave: "/>
							<h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getPalabrasClave()}"/>

							<h:outputText value="Nombres proponente: "/>
							<h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getNombreUsuario()}"/>

							<h:outputText value="Correo proponente: "/>
							<h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getCorreoUsuario()}"/>

							<h:outputText value="Estado: "/>
							<h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getEstado()}"/>

							<h:outputText value="Votos: "/>
							<h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getNumeroVotos()}"/>

							<p:commandButton value="Votar" action="#{IniciativaBean.votar}" align="center" update="form"/>
						</h:panelGrid>
						<p:messages>
							<p:autoUpdate />
						</p:messages>
						<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
							<p:outputLabel for="@next" value="Cambiar estado a:" />
							<p:selectOneMenu id="console" value="#{IniciativaBean.estado}" style="width:125px">
								<f:selectItem itemLabel="Select One" itemValue="" />
								<f:selectItem itemLabel="En espera de revisión" itemValue="En espera de revisión" />
								<f:selectItem itemLabel="En revisión" itemValue="En revisión" />
								<f:selectItem itemLabel="Proyecto" itemValue="Proyecto" />
								<f:selectItem itemLabel="Solucionado" itemValue="Solucionado" />
							</p:selectOneMenu>
							<p:commandButton value="Guardar" action="#{IniciativaBean.cambiarEstado}" oncomplete="PF('dlg').show()" align="center" update="form"/>
						</h:panelGrid>

					</div>
			  <p:dialog header="Iniciativa actualizada" modal="true" showEffect="bounce" widgetVar="dlg" resizable="false">
				  <p:panelGrid columns="2" id="display" columnClasses="label,value">
					  <h:outputText value="Nombre: "/>
					  <h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getNombre()}"/>

					  <h:outputText value="Descripción: "/>
					  <h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getDescripcion()}"/>

					  <h:outputText value="Palabras clave: "/>
					  <h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getPalabrasClave()}"/>

					  <h:outputText value="Nombres proponente: "/>
					  <h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getNombreUsuario()}"/>

					  <h:outputText value="Correo proponente: "/>
					  <h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getCorreoUsuario()}"/>

					  <h:outputText value="Estado: "/>
					  <h:outputText value="#{IniciativaBean.iniciativaConsultadaId.getEstado()}"/>

				  </p:panelGrid>
				  <br></br><br></br><p:commandButton value="Volver" action="#{PageBean.page04}" align="center" update="form"/>
			  </p:dialog>
		</h:form>
      </h:body>
</html>