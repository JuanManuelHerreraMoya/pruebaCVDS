<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"

      xmlns:p="http://primefaces.org/ui">

      <h:head>
      	<meta charset="UTF-8"></meta>
      	<link rel="stylesheet" type="text/css" href="css/admin.css"/>

      	<meta http-equiv="Expires" content="0" />
		<meta http-equiv="Pragma" content="no-cache" />

		<script type="text/javascript">
		  if(history.forward(1)){
		    location.replace( history.forward(1) );
		  }
		</script>
      	<title>Modificar Usuario</title>
		  <img style="float: right; margin: 0px 0px 15px 15px;" src="img/usuario.jpg" width="50" />
		  <h3 align="right">
			  <h:outputText value="#{LoginBean.getNombreUsuario()}"/> <br/>
			  <h:outputText value="#{LoginBean.getRolUsuario()}"/><br/>
			  <p:commandButton class="volver" value="Volver" action="#{LoginBean.direccionarPorPerfil}"/>
			  <p:commandButton class="logout" value="Cerrar sesiÃ³n" action="#{LoginBean.logout}"/><br/>
		  </h3>
	</h:head>

      <h:body>

		  <br/><br/>
		  <h1>Modificar Usuarios</h1>
		  <h2>Unidad de proyectos</h2>
		  <br/><br/>

		  <h:form>

			<section>
			  <div id="dos">
				  <h:outputText value="Nombre: "/>
				  <h:outputText value="#{LoginBean.usuarioConsultado.getNombre()}"/><br></br><br></br>

				  <h:outputText value="Correo: "/>
				  <h:outputText value="#{LoginBean.usuarioConsultado.getCorreo()}"/><br></br><br></br>

				  <h:outputText value="Tipo de usuario: "/>
				  <h:outputText value="#{LoginBean.usuarioConsultado.getTipoUser()}"/><br></br><br></br>

				  <h:outputText value="Dependencia: "/>
				  <h:outputText value="#{LoginBean.usuarioConsultado.getDependencia()}"/><br></br><br></br>

			  </div>
			</section>

			  <p:messages>
				  <p:autoUpdate />
			  </p:messages>
			  <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
				  <p:outputLabel for="@next" value="Tipo de usuario:" />
				  <p:selectOneMenu id="console" value="#{LoginBean.changeTipoUser}" style="width:125px">
					  <f:selectItem itemLabel="Select One" itemValue="" />
					  <f:selectItem itemLabel="Admin" itemValue="Admin" />
					  <f:selectItem itemLabel="PMO" itemValue="PMO" />
					  <f:selectItem itemLabel="User" itemValue="User" />
					  <f:selectItem itemLabel="Proponente" itemValue="Proponente" />
				  </p:selectOneMenu>
				  <p:commandButton value="Guardar" action="#{LoginBean.convertirTipoUser}" align="center" oncomplete="PF('dlg').show()" />

			  </h:panelGrid>

			  <p:dialog header="Usuario actualizado" modal="true" showEffect="bounce" widgetVar="dlg" resizable="false">
				  <p:panelGrid columns="2" id="display" columnClasses="label,value">
					  <h:outputText value="Nombre: "/>
					  <h:outputText value="#{LoginBean.usuarioConsultado.getNombre()}"/>

					  <h:outputText value="Correo: "/>
					  <h:outputText value="#{LoginBean.usuarioConsultado.getCorreo()}"/>

					  <h:outputText value="Tipo de usuario: "/>
					  <h:outputText value="#{LoginBean.usuarioConsultado.getTipoUser()}"/>

					  <h:outputText value="Dependencia: "/>
					  <h:outputText value="#{LoginBean.usuarioConsultado.getDependencia()}"/>
				  </p:panelGrid>
				  <br></br><br></br><p:commandButton value="Volver" action="#{PageBean.page4}" align="center" />
			  </p:dialog>
		  </h:form>
      </h:body>
</html>